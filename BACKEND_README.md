# Backend API - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

## ‚úÖ –ß—Ç–æ —Å–æ–∑–¥–∞–Ω–æ:

1. **Backend —Å–µ—Ä–≤–µ—Ä** (`server/server.js`) - Express API —Å SQLite
2. **API —Å–µ—Ä–≤–∏—Å** (`src/services/api.ts`) - –∫–ª–∏–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API
3. **Storage —Å–µ—Ä–≤–∏—Å** (`src/services/storage.ts`) - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É API –∏ localStorage

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç:

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π backend

```bash
cd server
npm install
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –ï—Å–ª–∏ `sqlite3` –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ Windows, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–µ–¥–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é:
```bash
npm install sqlite3 --build-from-source=false
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—É - –∑–∞–º–µ–Ω–∏—Ç–µ `sqlite3` –Ω–∞ `better-sqlite3` (—Ç—Ä–µ–±—É–µ—Ç –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä C++).

### 2. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
npm start
# –∏–ª–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run dev
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ `http://localhost:3000`

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ frontend

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
VITE_API_URL=http://localhost:3000/api
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞

–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. –û–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å API –∏ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –≤–º–µ—Å—Ç–æ localStorage.

## üìã API Endpoints

–í—Å–µ endpoints —Ç—Ä–µ–±—É—é—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∏ —Å –¥–∞–Ω–Ω—ã–º–∏ Telegram:
- `x-telegram-id`
- `x-telegram-username`  
- `x-telegram-first-name`
- `x-telegram-last-name`

### –ü–æ–ª—É—á–∞—Ç–µ–ª–∏
- `GET /api/recipients` - —Å–ø–∏—Å–æ–∫
- `POST /api/recipients` - —Å–æ–∑–¥–∞—Ç—å
- `PUT /api/recipients/:id` - –æ–±–Ω–æ–≤–∏—Ç—å
- `DELETE /api/recipients/:id` - —É–¥–∞–ª–∏—Ç—å

### –ó–∞–∫–∞–∑—ã
- `GET /api/orders` - —Å–ø–∏—Å–æ–∫
- `POST /api/orders` - —Å–æ–∑–¥–∞—Ç—å
- `PUT /api/orders/:id` - –æ–±–Ω–æ–≤–∏—Ç—å
- `DELETE /api/orders/:id` - —É–¥–∞–ª–∏—Ç—å
- `DELETE /api/orders` (body: `{ids: [...]}`) - —É–¥–∞–ª–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ

### –ê–¥—Ä–µ—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏
- `GET /api/delivery-addresses` - —Å–ø–∏—Å–æ–∫
- `POST /api/delivery-addresses` - —Å–æ–∑–¥–∞—Ç—å
- `PUT /api/delivery-addresses/:id` - –æ–±–Ω–æ–≤–∏—Ç—å
- `DELETE /api/delivery-addresses/:id` - —É–¥–∞–ª–∏—Ç—å

### –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è
- `GET /api/consolidations` - —Å–ø–∏—Å–æ–∫
- `POST /api/consolidations` - —Å–æ–∑–¥–∞—Ç—å
- `PUT /api/consolidations/:id` - –æ–±–Ω–æ–≤–∏—Ç—å
- `DELETE /api/consolidations/:id` - —É–¥–∞–ª–∏—Ç—å

## üîÑ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å API —á–µ—Ä–µ–∑ `/api/health`
2. –ï—Å–ª–∏ API –¥–æ—Å—Ç—É–ø–µ–Ω - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–≥–æ
3. –ï—Å–ª–∏ API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ localStorage
4. –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `storage.ts`

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –¥–æ–±–∞–≤—å—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É –ø–æ–¥–ø–∏—Å–∏ Telegram WebApp
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ CORS –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –î–æ–±–∞–≤—å—Ç–µ rate limiting
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Å–µ–∫—Ä–µ—Ç–æ–≤

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `storage.ts` –≤–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–≥–æ `localStorage`
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Ä–∞–±–æ—Ç—É —Å API
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–µ–ø–ª–æ–π backend –Ω–∞ —Å–µ—Ä–≤–µ—Ä
4. –î–æ–±–∞–≤—å—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö –∏–∑ localStorage –≤ –±–∞–∑—É
